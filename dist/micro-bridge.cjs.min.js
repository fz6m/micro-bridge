/*!
 * micro-bridge v1.0.0
 * (c) 2020-2021 fz6m
 * Released under the MIT License.
 */
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("lodash.set"),t=require("lodash.get"),r=require("lodash.isequal");function n(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=n(e),u=n(t),i=n(r);u.default(window,"_$store")||o.default(window,"_$store",{});var f=function(e,t){return"_$"+e+"."+t};function a(e,t){for(var r=0,n=t.length,o=e.length;r<n;r++,o++)e[o]=t[r];return e}var d=function(e,t){return y(e,t)||[]},c=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=d(e,t);o.forEach((function(e){try{e.apply(void 0,r)}catch(e){}}))},s=function(e){return{get:function(t){return d(t,e)},add:function(t,r){return function(e,t,r){var n=d(e,r);if(!~n.indexOf(t)){var o=a(a([],n),[t]);g(e,o,r)}}(t,r,e)},destory:function(t){return function(e,t){g(e,[],t)}(t,e)},delete:function(t,r){return function(e,t,r){var n=d(e,r),o=n.indexOf(t);return!!~o&&(n.splice(o,1),g(e,n,r),!0)}(t,r,e)},dispacth:function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];return c.apply(void 0,a([t,e],r))}}},l=s("value_subscribe"),v={$on:l.add,$destory:l.destory,$delete:l.delete},p=function(){return u.default(window,"_$store")||{}},h=function(e){var t=p();return u.default(t,e)},$=function(e,t){!function(e,t,r){i.default(r,t)||l.dispacth(e,t,r)}(e,t,h(e));var r=p();o.default(r,e,t)},g=function(e,t,r){var n=f(r,e);$(n,t)},y=function(e,t){var r=f(t,e);return h(r)},_={getStore:p,get:h,set:$,getWithScope:y,setWithScope:g},b=s("subscribe"),w={$on:b.add,$off:b.destory,$emit:function(e,t){b.dispacth(e,t)},$delete:b.delete};exports.Store=_,exports.StoreBus=w,exports.StoreChange=v;
